<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø³ÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© - Ù…Ø­Ù…Ø¯ ØµØ§Ù„Ø­</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Ø±Ø¨Ø· Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ© -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // =============================================================
        //  âš ï¸ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: Ø¶ÙØ¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙØ§ÙŠØ¨Ø±Ø¨ÙŠØ² Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ø¨ÙŠÙ† Ø§Ù„Ù‚ÙˆØ³ÙŠÙ† Ø£Ø¯Ù†Ø§Ù‡
        // =============================================================
        const firebaseConfig = {
  apiKey: "AIzaSyC14Dt5V0Q1q7RYDre_TuYcuejoahhd478",
  authDomain: "syriaapp-cf66d.firebaseapp.com",
  projectId: "syriaapp-cf66d",
  storageBucket: "syriaapp-cf66d.firebasestorage.app",
  messagingSenderId: "436974106636",
  appId: "1:436974106636:web:a4b27a28fa51f3e80b9629",
  measurementId: "G-4T7GXLG5BH"
};
        // =============================================================

        // ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.db = db;
        window.dbFunctions = { collection, addDoc, onSnapshot, query, orderBy };
    </script>

    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f0fdf4; touch-action: manipulation; }
        .page { display: none; }
        .page.active { display: block; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        #toast {
            visibility: hidden; min-width: 280px; background-color: #064e3b; color: #fff;
            text-align: center; border-radius: 16px; padding: 16px; position: fixed;
            z-index: 500; left: 50%; top: 20px; transform: translateX(-50%);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {top: 0; opacity: 0;} to {top: 20px; opacity: 1;} }
        @keyframes fadeout { from {top: 20px; opacity: 1;} to {top: 0; opacity: 0;} }
    </style>
</head>
<body class="text-gray-900 overflow-x-hidden">

    <div id="toast">ØªÙ… Ø¨Ø±Ù…Ø¬Ø© Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ù† Ù‚Ø¨Ù„ Ù…Ø­Ù…Ø¯ ØµØ§Ù„Ø­</div>

    <div class="max-w-md mx-auto bg-white min-h-screen shadow-2xl relative flex flex-col">
        
        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <header class="bg-[#10b981] p-5 text-white shadow-lg sticky top-0 z-50">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-xl font-bold">Ø³ÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ğŸ‡¸ğŸ‡¾</h1>
                    <p class="text-[10px] bg-black/20 px-2 py-0.5 rounded mt-1">Ø¨Ø¥Ø´Ø±Ø§Ù: Ù…Ø­Ù…Ø¯ ØµØ§Ù„Ø­</p>
                </div>
                <button onclick="askAdminCode()" class="bg-white/20 p-2 rounded-full hover:bg-white/30 transition">
                    âš™ï¸
                </button>
            </div>
            <div class="mt-3 text-[10px] text-green-100 font-bold animate-pulse">â— Ù‡Ø°Ø§ ØªØ·Ø¨ÙŠÙ‚ ØªØ¬Ø±ÙŠØ¨ÙŠ</div>
        </header>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
        <main class="flex-1 overflow-y-auto p-4 pb-28">
            
            <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
            <section id="home" class="page active space-y-4">
                <!-- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="showPage('jobs')" class="bg-white border p-5 rounded-2xl shadow-sm text-center active:scale-95 transition border-t-4 border-green-500">
                        <span class="text-3xl">ğŸ’¼</span>
                        <p class="text-xs font-bold mt-2">Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</p>
                    </button>
                    <button onclick="showPage('market')" class="bg-white border p-5 rounded-2xl shadow-sm text-center active:scale-95 transition border-t-4 border-blue-500">
                        <span class="text-3xl">ğŸ›’</span>
                        <p class="text-xs font-bold mt-2">Ø§Ù„Ø³ÙˆÙ‚</p>
                    </button>
                    <button onclick="showPage('realestate')" class="bg-white border p-5 rounded-2xl shadow-sm text-center active:scale-95 transition border-t-4 border-red-500">
                        <span class="text-3xl">ğŸ </span>
                        <p class="text-xs font-bold mt-2">Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</p>
                    </button>
                    <button onclick="showPage('cars')" class="bg-white border p-5 rounded-2xl shadow-sm text-center active:scale-95 transition border-t-4 border-yellow-500">
                        <span class="text-3xl">ğŸš—</span>
                        <p class="text-xs font-bold mt-2">Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</p>
                    </button>
                </div>

                <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø­ÙŠØ© -->
                <div class="bg-gray-50 rounded-2xl p-4 border border-green-100">
                    <h3 class="text-xs font-bold text-gray-500 mb-3 uppercase tracking-wider">Ø¢Ø®Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©</h3>
                    <div id="live-ads" class="space-y-3">
                        <!-- Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
                        <div class="text-center py-4">
                            <p class="text-[10px] text-gray-400">ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø±Ø¨Ø· Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
            <section id="admin" class="page space-y-4">
                <div class="flex items-center justify-between bg-red-50 p-4 rounded-xl border border-red-100">
                    <h2 class="text-red-700 font-bold">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ ğŸ› ï¸</h2>
                    <button onclick="showPage('home')" class="text-[10px] bg-red-600 text-white px-3 py-1 rounded">Ø®Ø±ÙˆØ¬</button>
                </div>

                <div class="bg-white border p-4 rounded-2xl shadow-sm space-y-4">
                    <h3 class="text-sm font-bold">Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯</h3>
                    <input id="ad-title" type="text" placeholder="Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªØ¹Ù„Ù†ØŸ" class="w-full p-3 bg-gray-50 border rounded-xl text-sm focus:ring-2 focus:ring-green-500 outline-none">
                    <select id="ad-category" class="w-full p-3 bg-gray-50 border rounded-xl text-sm">
                        <option value="jobs">Ù‚Ø³Ù… Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</option>
                        <option value="market">Ù‚Ø³Ù… Ø§Ù„Ø³ÙˆÙ‚</option>
                        <option value="realestate">Ù‚Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</option>
                        <option value="cars">Ù‚Ø³Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</option>
                    </select>
                    <textarea id="ad-desc" placeholder="ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©..." class="w-full p-3 bg-gray-50 border rounded-xl text-sm h-24"></textarea>
                    <button onclick="postToFirebase()" class="w-full bg-green-600 text-white py-4 rounded-xl font-bold shadow-lg active:scale-95 transition">
                        Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ø¬Ù…ÙŠØ¹ ğŸš€
                    </button>
                </div>
            </section>

        </main>

        <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø±ÙŠ -->
        <div id="code-modal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center p-6 z-[600]">
            <div class="bg-white rounded-3xl p-6 w-full max-w-xs text-center shadow-2xl">
                <div class="text-4xl mb-4">ğŸ”</div>
                <h3 class="font-bold text-lg mb-2">Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†</h3>
                <p class="text-[10px] text-gray-400 mb-4">ÙŠÙØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø±ÙŠ Ù„Ù„Ø¯Ø®ÙˆÙ„</p>
                <input id="admin-code" type="tel" placeholder="****" class="w-full p-4 border rounded-2xl text-center text-3xl font-bold tracking-[10px] bg-gray-50">
                <button onclick="verifyCode()" class="w-full bg-[#10b981] text-white mt-4 py-4 rounded-2xl font-bold">Ø¯Ø®ÙˆÙ„</button>
                <button onclick="closeCodeModal()" class="w-full text-gray-400 mt-4 text-xs font-medium">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>

        <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙÙ„ÙŠØ© -->
        <nav class="absolute bottom-0 w-full bg-white/90 backdrop-blur-md border-t flex justify-around p-3 z-50">
            <button onclick="showPage('home')" class="flex flex-col items-center gap-1 text-green-600">
                <span class="text-xl">ğŸ </span>
                <span class="text-[9px] font-bold">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
            </button>
            <button class="flex flex-col items-center gap-1 text-gray-400 opacity-50">
                <span class="text-xl">ğŸ’¬</span>
                <span class="text-[9px] font-bold">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</span>
            </button>
            <button class="flex flex-col items-center gap-1 text-gray-400 opacity-50">
                <span class="text-xl">ğŸ‘¤</span>
                <span class="text-[9px] font-bold">Ø­Ø³Ø§Ø¨ÙŠ</span>
            </button>
        </nav>

    </div>

    <script>
        // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©
        window.onload = function() {
            const toast = document.getElementById("toast");
            toast.className = "show";
            setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3000);
            
            // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­ÙŠØ§Ù‹ Ù…Ù† Firebase Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø±Ø¨Ø·
            try {
                loadLiveAds();
            } catch(e) { console.log("Firebase not linked yet"); }
        };

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
        }

        function askAdminCode() {
            document.getElementById('code-modal').classList.remove('hidden');
        }

        function closeCodeModal() {
            document.getElementById('code-modal').classList.add('hidden');
        }

        function verifyCode() {
            const input = document.getElementById('admin-code').value;
            if(input === "09962") {
                closeCodeModal();
                showPage('admin');
                document.getElementById('admin-code').value = "";
            } else {
                alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­!");
            }
        }

        // Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Firebase
        async function postToFirebase() {
            const title = document.getElementById('ad-title').value;
            const category = document.getElementById('ad-category').value;
            const desc = document.getElementById('ad-desc').value;

            if(!title) { alert("ÙŠÙØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†!"); return; }

            try {
                const { addDoc, collection } = window.dbFunctions;
                await addDoc(collection(window.db, "syria_ads"), {
                    title: title,
                    category: category,
                    description: desc,
                    createdAt: new Date().getTime(),
                    author: "Ù…Ø­Ù…Ø¯ ØµØ§Ù„Ø­"
                });
                
                alert("ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¢Ù†.");
                document.getElementById('ad-title').value = "";
                document.getElementById('ad-desc').value = "";
                showPage('home');
            } catch (error) {
                console.error("Error: ", error);
                alert("Ø®Ø·Ø£: ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¶Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø£ÙˆÙ„Ø§Ù‹.");
            }
        }

        // Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¹Ø±Ø¶Ù‡Ø§
        function loadLiveAds() {
            const { onSnapshot, collection, query, orderBy } = window.dbFunctions;
            const q = query(collection(window.db, "syria_ads"), orderBy("createdAt", "desc"));
            
            onSnapshot(q, (snapshot) => {
                const container = document.getElementById('live-ads');
                container.innerHTML = "";
                
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const card = `
                        <div class="bg-white p-3 border rounded-xl shadow-sm border-r-4 border-green-500">
                            <div class="flex justify-between items-start">
                                <h4 class="font-bold text-sm">${data.title}</h4>
                                <span class="text-[8px] bg-gray-100 px-1 rounded uppercase">${data.category}</span>
                            </div>
                            <p class="text-[10px] text-gray-500 mt-1">${data.description || ''}</p>
                            <p class="text-[8px] text-green-600 mt-2">Ø¨ÙˆØ§Ø³Ø·Ø©: ${data.author}</p>
                        </div>
                    `;
                    container.innerHTML += card;
                });
            });
        }
    </script>
</body>
</html>


