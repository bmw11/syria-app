// مشروع تطبيق ويب متكامل للسوريين باستخدام HTML, CSS, JavaScript و LocalStorage لتخزين البيانات مؤقتاً

// الهيكل الأساسي للتطبيق
const app = document.createElement('div');
app.id = 'app';
document.body.appendChild(app);

// CSS أساسي
const style = document.createElement('style');
style.innerHTML = `
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f5f5f5; }
#app { max-width: 1200px; margin: auto; padding: 20px; }
header { display:flex; justify-content: space-between; align-items:center; background:#4CAF50; color:white; padding:10px 20px; border-radius:10px; }
nav button { margin:0 5px; padding:10px 15px; border:none; border-radius:5px; cursor:pointer; background:#fff; color:#4CAF50; font-weight:bold; }
nav button:hover { background:#e8f5e9; }
section { margin-top:20px; background:white; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
.service-button { display:block; margin:10px 0; padding:10px 15px; border:none; border-radius:5px; background:#4CAF50; color:white; cursor:pointer; font-size:16px; }
.service-button:hover { background:#45a049; }
.login-section { display:flex; flex-direction:column; max-width:400px; margin:auto; }
.login-section input { margin:10px 0; padding:10px; font-size:16px; border-radius:5px; border:1px solid #ccc; }
.login-section button { background:#4CAF50; color:white; border:none; padding:10px; font-size:16px; cursor:pointer; border-radius:5px; }
.login-section button:hover { background:#45a049; }
`; 
document.head.appendChild(style);

// بيانات المستخدمين مؤقتة
let users = [{username:'user1', password:'1234', role:'user'}, {username:'admin', password:'09962', role:'owner'}];

let currentUser = null;

function renderLogin(){
    app.innerHTML = '<section class="login-section"><h2>تسجيل الدخول</h2><input id="username" placeholder="اسم المستخدم"><input id="password" placeholder="كلمة المرور" type="password"><button id="loginBtn">تسجيل الدخول</button></section>';
    document.getElementById('loginBtn').onclick = ()=>{
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const user = users.find(u=>u.username===username && u.password===password);
        if(user){ currentUser=user; renderApp(); } else { alert('بيانات غير صحيحة'); }
    };
}

function renderApp(){
    app.innerHTML = '';
    const header = document.createElement('header');
    header.innerHTML = `<h1>تطبيق خدمات السوريين</h1>`;
    const nav = document.createElement('nav');

    const sections = ['الخدمات الحكومية','خدمات الاتصال','خدمات طبية','الشرطة','بلاغات','حوالات مالية','ارسال واستقبال العملاء'];

    sections.forEach(sec=>{
        const btn = document.createElement('button');
        btn.textContent = sec;
        btn.onclick = ()=>renderSection(sec);
        nav.appendChild(btn);
    });

    header.appendChild(nav);
    app.appendChild(header);

    // اذا كان المالك
    if(currentUser.role==='owner'){
        const adminBtn = document.createElement('button');
        adminBtn.textContent='لوحة المالك';
        adminBtn.onclick = renderOwnerPanel;
        header.appendChild(adminBtn);
    }
    renderSection('الخدمات الحكومية');
}

function renderSection(section){
    let content = document.createElement('section');
    content.innerHTML=`<h2>${section}</h2>`;

    // إضافة بعض الخدمات لكل قسم
    let services = [];
    switch(section){
        case 'الخدمات الحكومية': services=['تجديد الهوية','إصدار جواز سفر','تقديم طلبات']; break;
        case 'خدمات الاتصال': services=['شراء شريحة','شحن رصيد','الإنترنت']; break;
        case 'خدمات طبية': services=['حجز موعد','استشارة طبية','صيدليات قريبة']; break;
        case 'الشرطة': services=['الاتصال الطارئ','تقديم بلاغ','خدمات المرور']; break;
        case 'بلاغات': services=['بلاغ سرقة','بلاغ حريق','بلاغ فقدان']; break;
        case 'حوالات مالية': services=['تحويل أموال','كشف حساب','إيداع']; break;
        case 'ارسال واستقبال العملاء': services=['تحديد موعد','خدمة التوصيل','خدمة العملاء']; break;
    }

    services.forEach(s=>{
        const btn = document.createElement('button');
        btn.className='service-button';
        btn.textContent=s;
        btn.onclick = ()=>alert('تم اختيار الخدمة: '+s);
        content.appendChild(btn);
    });

    const oldSection = document.querySelector('section');
    if(oldSection) oldSection.remove();
    app.appendChild(content);
}

function renderOwnerPanel(){
    let panel = document.createElement('section');
    panel.innerHTML=`<h2>لوحة التحكم للمالك</h2><p>تعيين مشرفين وصلاحياتهم</p><input id="newUser" placeholder="اسم المستخدم"><input id="newPass" placeholder="كلمة المرور" type="password"><select id="role"><option value="user">مشرف عادي</option><option value="owner">مالك</option></select><button id="addUser">إضافة مستخدم</button>`;
    app.appendChild(panel);

    document.getElementById('addUser').onclick = ()=>{
        const username = document.getElementById('newUser').value;
        const password = document.getElementById('newPass').value;
        const role = document.getElementById('role').value;
        users.push({username,password,role});
        alert('تم إضافة المستخدم');
    };
}

renderLogin();
